<div class="meet-container" [class.meet-is-mobile]="mobileQuery.matches">
  <speek-meet-toolbar [auth]="auth"></speek-meet-toolbar>

  <mat-sidenav-container
    class="meet-sidenav-container"
    [style.marginTop.px]="mobileQuery.matches ? 56 : 0"
    [style.marginBottom.px]="mobileQuery.matches ? 56 : 0"
  >
    <mat-sidenav-content class="meet-sidenav-content">
      <mat-card id="remote" class="meet-card-remote">
        <video #remote autoplay playsinline [srcObject]="peer.remote"></video>
      </mat-card>

      <speek-local-stream
        [stream]="peer.stream"
        [state]="peer.uiState"
        (toggleAudio)="peer.toggleAudio($event)"
        (toggleVideo)="peer.toggleVideo($event)"
      ></speek-local-stream>
    </mat-sidenav-content>

    <mat-sidenav
      #enav
      class="mat-sidenav-end"
      [mode]="mobileQuery.matches ? 'over' : 'side'"
      [fixedInViewport]="mobileQuery.matches"
      fixedBottomGap="56"
      [opened]="chatOpened"
      position="end"
    >
      <speek-chat
        [user]="peer.user"
        (send)="onSendMessage($event)"
      ></speek-chat>
    </mat-sidenav>
  </mat-sidenav-container>

  <mat-toolbar color="primary" class="meet-toolbar mat-elevation-z4">
    <a routerLink="/">
      <img src="/assets/speek.svg" height="52" alt="Speek" />
    </a>

    <span class="space"></span>

    <button type="button" mat-icon-button (click)="openSettings()">
      <mat-icon>settings</mat-icon>
    </button>

    <button mat-icon-button (click)="enav.toggle()">
      <mat-icon class="icon-flip" [ngClass]="{flipped: enav.opened}">
        menu_open
      </mat-icon>
    </button>
  </mat-toolbar>
</div>
